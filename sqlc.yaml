version: "2"
sql:
  - engine: "postgresql"
    queries: "internal/infrastructure/database/queries"
    schema: "migrations"
    gen:
      go:
        package: "db"
        out: "internal/infrastructure/database/db"
        sql_package: "pgx/v5"
        emit_json_tags: true
        emit_db_tags: true
        emit_empty_slices: true
        emit_result_struct_pointers: true
        emit_params_struct_pointers: true
        overrides:
          - db_type: "uuid"
            go_type:
              import: "github.com/google/uuid"
              type: "UUID"
          - db_type: "timestamptz"
            go_type: "time.Time"
          - db_type: "interval"
            go_type: "time.Duration"
          - db_type: "jsonb"
            go_type: "json.RawMessage"
          - db_type: "text[]"
            go_type:
              type: "[]string"
              pointer: false
          # Custom enum overrides (use unqualified names - sqlc handles them)
          - db_type: "indicator_type"
            go_type:
              import: "orbguard-lab/internal/domain/models"
              type: "IndicatorType"
          - db_type: "severity_level"
            go_type:
              import: "orbguard-lab/internal/domain/models"
              type: "Severity"
          - db_type: "platform_type"
            go_type:
              type: "string"
          - db_type: "platform_type[]"
            go_type:
              type: "[]string"
          - db_type: "source_category"
            go_type:
              import: "orbguard-lab/internal/domain/models"
              type: "SourceCategory"
          - db_type: "source_type"
            go_type:
              import: "orbguard-lab/internal/domain/models"
              type: "SourceType"
          - db_type: "source_status"
            go_type:
              import: "orbguard-lab/internal/domain/models"
              type: "SourceStatus"
          - db_type: "report_status"
            go_type:
              import: "orbguard-lab/internal/domain/models"
              type: "ReportStatus"
          - db_type: "campaign_status"
            go_type:
              import: "orbguard-lab/internal/domain/models"
              type: "CampaignStatus"
          - db_type: "threat_actor_type"
            go_type:
              import: "orbguard-lab/internal/domain/models"
              type: "ThreatActorType"
          - db_type: "threat_actor_motivation"
            go_type:
              import: "orbguard-lab/internal/domain/models"
              type: "ThreatActorMotivation"
